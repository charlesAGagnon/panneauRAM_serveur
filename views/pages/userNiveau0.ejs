<!--<!DOCTYPE html>

* @file userNiveau0.ejs<html lang="fr" data-theme="light">

* @author charles-Antoine Gagnon<head>

* @version 1 - Dashboard RAM Niveau 0 (Lecture seule)    <%- include('../partials/head') %>

* @date 11/11/2025    <link rel="stylesheet" href="/stylesheets/modern.css">

* @brief Dashboard RAM - Niveau 0 : LECTURE SEULE (tous les contr√¥les d√©sactiv√©s)</head>

-->
<body style="margin: 0; padding: 0; background: #f8f9fa;">

    <!DOCTYPE html> <%- include('../partials/header', { currentPage: 'dashboard', user, niveau, typeAcces }) %>

    <html lang="fr">

    <head>
        <div class="min-h-screen py-12 px-4 sm:px-6 lg:px-8">

            <meta charset="UTF-8">
            <div class="max-w-4xl mx-auto">

                <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Header Card -->

                <title>PanneauRAM - Dashboard (Lecture seule)</title>
                <div class="card bg-base-100 shadow-2xl mb-6 border-t-4">

                    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
                    <div class="card-body">

                        <link rel="stylesheet" href="/stylesheets/modern.css">
                        <div class="flex items-center justify-between flex-wrap gap-4">

                            <link rel="stylesheet" href="/stylesheets/ui-components.css">
                            <div>

                                <script src="/socket.io/socket.io.js"></script>
                                <h1 class="text-4xl font-bold bg-gradient-to-r from-primary to-primary bg-clip-text text-transparent">

    </head> Bonjour, <%= user %> !

    <body style="margin: 0; padding: 0; background: #f8f9fa;">
        </h1>

        <p class="text-gray-600 mt-2">Tableau de bord - <%= typeAcces || 'Invit√©' %></p>

        <%- include('../partials/header', { currentPage: 'dashboard', user, niveau, typeAcces }) %> </div>

        <div class="badge badge-lg gap-2">

            <!-- MAIN CONTENT: 3 COLUMNS --> <%= typeAcces || 'Invit√©' %>

            <div style="padding: 24px; display: grid; grid-template-columns: 2fr 1.5fr 1fr; gap: 24px;"> </div>

        </div>

        <!-- COLUMN 1: GRAPH & MONITORING -->
        </div>

        <div class="card"> </div>

        <div class="card-header">

            <h2 class="card-header-title">üìà Monitoring Temps R√©el</h2> <!-- Alert Info -->

        </div>
        <div class="alert shadow-lg mb-6">

            <div class="card-body">
                <h3 class="font-bold">Acc√®s en lecture seule</h3>

                <div style="height: 300px; background: #f3f4f6; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #6b7280; font-size: 14px;">
                    <div class="text-xs">Vous pouvez consulter tous les Raspberry Pi mais sans possibilit√© de modifier les configurations.</div>

                    Graphique (placeholder)
                </div>

            </div>

            <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
                <!-- Acc√®s Rapides -->

                <p style="font-size: 12px; color: #6b7280; margin: 0;">
                    <div class="card bg-base-100 shadow-2xl mb-6">

                        <strong>R√©servoirs :</strong> GB: <span id="legend-gb">--</span>% | PB: <span id="legend-pb">--</span>% <div class="card-body">

                </p>
                <h2 class="card-title text-2xl mb-4">üöÄ Acc√®s Rapides</h2>

                <p style="font-size: 12px; color: #6b7280; margin: 4px 0 0 0;">
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-3">

                        <strong>Temp√©rature :</strong> <span id="legend-temp">--</span>¬∞C <a href="/ram?user=<%= user %>&niveau=<%= niveau %>&typeAcces=<%= typeAcces %>" class="btn btn-primary gap-2">üìä Panneau RAM</a>

                </p> <a href="/granulaires?user=<%= user %>&niveau=<%= niveau %>&typeAcces=<%= typeAcces %>" class="btn btn-primary gap-2">üåæ Granudoseur</a>

            </div>
        </div>

        </div>
        </div>

        </div>
        </div>



        <!-- COLUMN 2: STATUS & CONTROLS (READ-ONLY) -->
        <!-- Raspberry Pi Access -->

        <div style="display: flex; flex-direction: column; gap: 16px;">
            <div class="card bg-base-100 shadow-2xl mb-6">

                <div class="card-body">

                    <!-- RESERVOIRS STATUS - VISUAL CYLINDERS -->
                    <h2 class="card-title text-2xl mb-4">

                        <div class="card"> üîß Acc√®s aux Raspberry Pi (Lecture seule)

                            <div class="card-header">
                    </h2>

                    <h3 class="card-header-title">üè∫ R√©servoirs</h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-3">

                    </div> <a href="/raspberrypi1?user=<%= user %>&niveau=0&typeAcces=<%= typeAcces %>" class="btn btn-outline gap-2">Pi 1</a>

                    <div class="card-body" style="display: flex; justify-content: space-around; align-items: flex-end; gap: 12px; min-height: 200px;"> <a href="/raspberrypi2?user=<%= user %>&niveau=0&typeAcces=<%= typeAcces %>" class="btn btn-outline gap-2">Pi 2</a>

                        <!-- Cylindre GB --> <a href="/raspberrypi3?user=<%= user %>&niveau=0&typeAcces=<%= typeAcces %>" class="btn btn-outline gap-2">Pi 3</a>

                        <div style="display: flex; flex-direction: column; align-items: center; gap: 8px;"> <a href="/raspberrypi4?user=<%= user %>&niveau=0&typeAcces=<%= typeAcces %>" class="btn btn-outline gap-2">Pi 4</a>

                            <div style="font-size: 10px; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px;">GB</div> <a href="/raspberrypi5?user=<%= user %>&niveau=0&typeAcces=<%= typeAcces %>" class="btn btn-outline gap-2">Pi 5</a>

                            <div style="position: relative; width: 50px; height: 120px; border: 2px solid #0d6efd; border-radius: 6px; background: #f0f4ff; overflow: hidden;"> <a href="/raspberrypi6?user=<%= user %>&niveau=0&typeAcces=<%= typeAcces %>" class="btn btn-outline gap-2">Pi 6</a>

                                <div id="cylinder-gb-fill" style="position: absolute; bottom: 0; width: 100%; height: 0%; background: linear-gradient(180deg, #0d6efd, #0a58ca); transition: height 0.3s ease; border-radius: 4px;"></div>
                            </div>

                        </div>
                        <div class="alert mt-4">üîí Mode consultation uniquement - Aucune commande ne peut √™tre envoy√©e</div>

                        <div style="font-weight: 700; font-size: 16px; color: #0d6efd;" id="val-gb">0%</div>
                    </div>

                </div>
            </div>

        </div>

        <!-- Cylindre PB -->
        </div>

        <div style="display: flex; flex-direction: column; align-items: center; gap: 8px;">

            <div style="font-size: 10px; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px;">PB</div> <%- include('../partials/footer') %>

            <div style="position: relative; width: 50px; height: 120px; border: 2px solid #0d6efd; border-radius: 6px; background: #f0f4ff; overflow: hidden;">
    </body>

    <div id="cylinder-pb-fill" style="position: absolute; bottom: 0; width: 100%; height: 0%; background: linear-gradient(180deg, #0d6efd, #0a58ca); transition: height 0.3s ease; border-radius: 4px;"></div>
    </html>

    </div>
    <div style="font-weight: 700; font-size: 16px; color: #0d6efd;" id="val-pb">0%</div>
    </div>
    </div>
    </div>

    <!-- CONSIGNES RESERVOIRS (DISABLED) -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-header-title">üè∫ Consignes R√©servoirs üîí</h3>
        </div>
        <div class="card-body">
            <div style="margin-bottom: 14px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <label class="form-label" style="margin: 0;">Niveau GB</label>
                    <span style="font-weight: 700; font-size: 12px; color: #6b7280;"><span id="val-slider-gb">0</span>%</span>
                </div>
                <input type="range" class="form-control" id="slider-gb" min="0" max="100" value="0" disabled style="opacity: 0.5; cursor: not-allowed;">
            </div>

            <div style="margin-bottom: 14px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <label class="form-label" style="margin: 0;">Niveau PB</label>
                    <span style="font-weight: 700; font-size: 12px; color: #6b7280;"><span id="val-slider-pb">0</span>%</span>
                </div>
                <input type="range" class="form-control" id="slider-pb" min="0" max="100" value="0" disabled style="opacity: 0.5; cursor: not-allowed;">
            </div>

            <div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <label class="form-label" style="margin: 0;">Temp√©rature PB</label>
                    <span style="font-weight: 700; font-size: 12px; color: #6b7280;"><span id="val-slider-tmpb">0</span>¬∞C</span>
                </div>
                <input type="range" class="form-control" id="slider-tmpb" min="0" max="100" value="0" disabled style="opacity: 0.5; cursor: not-allowed;">
            </div>
        </div>
    </div>

    <!-- CONSIGNES VANNES (DISABLED) -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-header-title">‚öôÔ∏è Consignes Vannes üîí</h3>
        </div>
        <div class="card-body">
            <div style="margin-bottom: 14px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <label class="form-label" style="margin: 0;">Valve GB</label>
                    <span style="font-weight: 700; font-size: 12px; color: #6b7280;"><span id="val-slider-gb-valve">0</span>%</span>
                </div>
                <input type="range" class="form-control" id="slider-gb-valve" min="0" max="100" value="0" disabled style="opacity: 0.5; cursor: not-allowed;">
            </div>

            <div style="margin-bottom: 14px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <label class="form-label" style="margin: 0;">Valve PB</label>
                    <span style="font-weight: 700; font-size: 12px; color: #6b7280;"><span id="val-slider-pb-valve">0</span>%</span>
                </div>
                <input type="range" class="form-control" id="slider-pb-valve" min="0" max="100" value="0" disabled style="opacity: 0.5; cursor: not-allowed;">
            </div>

            <div style="margin-bottom: 14px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <label class="form-label" style="margin: 0;">Valve EC</label>
                    <span style="font-weight: 700; font-size: 12px; color: #6b7280;"><span id="val-slider-ec">0</span>%</span>
                </div>
                <input type="range" class="form-control" id="slider-ec" min="0" max="100" value="0" disabled style="opacity: 0.5; cursor: not-allowed;">
            </div>

            <div style="margin-bottom: 14px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <label class="form-label" style="margin: 0;">Valve EF</label>
                    <span style="font-weight: 700; font-size: 12px; color: #6b7280;"><span id="val-slider-ef">0</span>%</span>
                </div>
                <input type="range" class="form-control" id="slider-ef" min="0" max="100" value="0" disabled style="opacity: 0.5; cursor: not-allowed;">
            </div>

            <div style="margin-bottom: 14px; display: flex; align-items: center; justify-content: space-between; padding: 10px; background: #f3f4f6; border-radius: 6px;">
                <label style="font-weight: 500; color: #212529; margin: 0;">Valve EEC</label>
                <button id="btn-eec" class="btn btn-primary" style="min-width: 60px; padding: 6px 12px; font-size: 12px; opacity: 0.5;" disabled>OFF</button>
            </div>

            <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px; background: #f3f4f6; border-radius: 6px;">
                <label style="font-weight: 500; color: #212529; margin: 0;">Valve EEF</label>
                <button id="btn-eef" class="btn btn-primary" style="min-width: 60px; padding: 6px 12px; font-size: 12px; opacity: 0.5;" disabled>OFF</button>
            </div>
        </div>
    </div>

    <!-- MODE & PUMP (DISABLED) -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-header-title">üéÆ Commandes üîí</h3>
        </div>
        <div class="card-body">
            <div style="margin-bottom: 12px;">
                <label class="form-label">Mode Syst√®me</label>
                <select id="select-mode" class="form-select" disabled style="opacity: 0.5; cursor: not-allowed;">
                    <option value="auto">AUTO</option>
                    <option value="manuel">MANUEL</option>
                </select>
            </div>
            <div>
                <label class="form-label">Pompe</label>
                <button id="btn-pompe" class="btn btn-primary" style="width: 100%; opacity: 0.5;" disabled>OFF</button>
            </div>
        </div>
    </div>

    </div>

    <!-- COLUMN 3: POWER METER -->
    <div style="display: flex; flex-direction: column; gap: 16px;">

        <!-- POWER METER STATS -->
        <div class="card">
            <div class="card-header">
                <h3 class="card-header-title">‚ö° Power Meter</h3>
            </div>
            <div class="card-body" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                <div class="stat-card">
                    <div class="stat-label">Van</div>
                    <div class="stat-value" id="stat-van" style="font-size: 20px;">--</div>
                    <div class="stat-unit">V</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Vbn</div>
                    <div class="stat-value" id="stat-vbn" style="font-size: 20px;">--</div>
                    <div class="stat-unit">V</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Vab</div>
                    <div class="stat-value" id="stat-vab" style="font-size: 20px;">--</div>
                    <div class="stat-unit">V</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Ia</div>
                    <div class="stat-value" id="stat-ia" style="font-size: 20px;">--</div>
                    <div class="stat-unit">A</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Ib</div>
                    <div class="stat-value" id="stat-ib" style="font-size: 20px;">--</div>
                    <div class="stat-unit">A</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">KW</div>
                    <div class="stat-value" id="stat-kw" style="font-size: 20px;">--</div>
                    <div class="stat-unit">kW</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">KWh</div>
                    <div class="stat-value" id="stat-kwh" style="font-size: 20px;">--</div>
                    <div class="stat-unit">kWh</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">FP</div>
                    <div class="stat-value" id="stat-fp" style="font-size: 20px;">--</div>
                    <div class="stat-unit"></div>
                </div>
            </div>
        </div>

        <!-- TEMPERATURE -->
        <div class="card">
            <div class="card-header">
                <h3 class="card-header-title">üå°Ô∏è Temp√©rature</h3>
            </div>
            <div class="card-body">
                <div class="stat-card">
                    <div class="stat-label">Temp PB</div>
                    <div class="stat-value" id="stat-temp" style="font-size: 28px;">--</div>
                    <div class="stat-unit">¬∞C</div>
                </div>
            </div>
        </div>

    </div>

    </div>

    <!-- FOOTER -->
    <footer style="background: white; border-top: 1px solid #e5e7eb; padding: 16px 24px; text-align: center; margin-top: 24px; color: #6b7280; font-size: 12px;">
        <%- include('../partials/footer') %>
    </footer>

    <script>
        document.body.dataset.niveau = '0';

    </script>
    <script src="/scripts/dashboard-script.js"></script>

</body>
</html>
